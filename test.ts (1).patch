--- /mnt/data/work/src4/src/database/test.ts
+++ /mnt/data/work/src4/src/database/test.ts
@@ -9,6 +9,7 @@
 import { checkDatabaseHealth } from '../db/index.js';
 import { runMigrations, getMigrationStatus } from './migrate';
 import { seedDatabase } from './seed';
+import { logger } from '../services/logger.js';
 
 export class DatabaseTester {
   private db = getDatabase();
@@ -17,7 +18,7 @@
    * Run comprehensive database tests
    */
   public async runTests(): Promise<boolean> {
-    console.log('ğŸ§ª Starting comprehensive database tests...\n');
+    logger.info('ğŸ§ª Starting comprehensive database tests...\n');
     
     let allTestsPassed = true;
 
@@ -41,9 +42,9 @@
       allTestsPassed = allTestsPassed && await this.testPerformance();
 
       if (allTestsPassed) {
-        console.log('\nâœ… All database tests passed successfully! ğŸ‰');
+        logger.info('\nâœ… All database tests passed successfully! ğŸ‰');
       } else {
-        console.log('\nâŒ Some database tests failed');
+        logger.info('\nâŒ Some database tests failed');
       }
 
       return allTestsPassed;
@@ -57,7 +58,7 @@
    * Test database connection
    */
   private async testConnection(): Promise<boolean> {
-    console.log('ğŸ”— Testing database connection...');
+    logger.info('ğŸ”— Testing database connection...');
     
     try {
       if (!this.db.isReady()) {
@@ -66,17 +67,17 @@
 
       const health = await checkDatabaseHealth();
       if (health.healthy) {
-        console.log('âœ… Connection test passed');
+        logger.info('âœ… Connection test passed');
         if (health.details.poolStats) {
-          console.log(`   ğŸ”Œ Pool:`, health.details.poolStats);
+          logger.info(`   ğŸ”Œ Pool:`, health.details.poolStats);
         }
         return true;
       } else {
-        console.log('âŒ Connection test failed - database unhealthy');
+        logger.info('âŒ Connection test failed - database unhealthy');
         return false;
       }
     } catch (error) {
-      console.log('âŒ Connection test failed:', error);
+      logger.info('âŒ Connection test failed:', error);
       return false;
     }
   }
@@ -85,7 +86,7 @@
    * Test migrations
    */
   private async testMigrations(): Promise<boolean> {
-    console.log('\nğŸ“‹ Testing migrations...');
+    logger.info('\nğŸ“‹ Testing migrations...');
     
     try {
       // Run migrations
@@ -94,14 +95,14 @@
       // Check migration status
       const status = await getMigrationStatus();
       
-      console.log(`âœ… Migration test passed`);
-      console.log(`   ğŸ“Š Total migrations: ${status.total}`);
-      console.log(`   âœ… Executed: ${status.executed}`);
-      console.log(`   â³ Pending: ${status.pending}`);
+      logger.info(`âœ… Migration test passed`);
+      logger.info(`   ğŸ“Š Total migrations: ${status.total}`);
+      logger.info(`   âœ… Executed: ${status.executed}`);
+      logger.info(`   â³ Pending: ${status.pending}`);
       
       return status.pending === 0;
     } catch (error) {
-      console.log('âŒ Migration test failed:', error);
+      logger.info('âŒ Migration test failed:', error);
       return false;
     }
   }
@@ -110,13 +111,13 @@
    * Test CRUD operations
    */
   private async testCRUD(): Promise<boolean> {
-    console.log('\nğŸ“ Testing CRUD operations...');
+    logger.info('\nğŸ“ Testing CRUD operations...');
     
     try {
       const sql = this.db.getSQL();
       
       // Test CREATE
-      console.log('   ğŸ“ Testing CREATE...');
+      logger.info('   ğŸ“ Testing CREATE...');
       const merchant = await sql`
         INSERT INTO merchants (business_name, whatsapp_number, business_category)
         VALUES ('Test Store', '+9647801234999', 'test')
@@ -128,10 +129,10 @@
       }
       
       const merchantId = merchant[0].id;
-      console.log(`   âœ… Created merchant: ${merchant[0].business_name}`);
+      logger.info(`   âœ… Created merchant: ${merchant[0].business_name}`);
 
       // Test READ
-      console.log('   ğŸ“– Testing READ...');
+      logger.info('   ğŸ“– Testing READ...');
       const readMerchant = await sql`
         SELECT * FROM merchants WHERE id = ${merchantId}
       `;
@@ -139,10 +140,10 @@
       if (readMerchant.length === 0) {
         throw new Error('Failed to read merchant');
       }
-      console.log(`   âœ… Read merchant: ${readMerchant[0].business_name}`);
+      logger.info(`   âœ… Read merchant: ${readMerchant[0].business_name}`);
 
       // Test UPDATE
-      console.log('   âœï¸ Testing UPDATE...');
+      logger.info('   âœï¸ Testing UPDATE...');
       await sql`
         UPDATE merchants 
         SET business_name = 'Updated Test Store'
@@ -156,10 +157,10 @@
       if (updatedMerchant[0].business_name !== 'Updated Test Store') {
         throw new Error('Failed to update merchant');
       }
-      console.log(`   âœ… Updated merchant name`);
+      logger.info(`   âœ… Updated merchant name`);
 
       // Test DELETE
-      console.log('   ğŸ—‘ï¸ Testing DELETE...');
+      logger.info('   ğŸ—‘ï¸ Testing DELETE...');
       await sql`DELETE FROM merchants WHERE id = ${merchantId}`;
       
       const deletedCheck = await sql<{ count: string }>`
@@ -168,12 +169,12 @@
       if (Number(deletedCheck[0].count) !== 0) {
         throw new Error('Failed to delete merchant');
       }
-      console.log(`   âœ… Deleted merchant`);
-
-      console.log('âœ… CRUD operations test passed');
+      logger.info(`   âœ… Deleted merchant`);
+
+      logger.info('âœ… CRUD operations test passed');
       return true;
     } catch (error) {
-      console.log('âŒ CRUD operations test failed:', error);
+      logger.info('âŒ CRUD operations test failed:', error);
       return false;
     }
   }
@@ -182,7 +183,7 @@
    * Test analytics views
    */
   private async testAnalytics(): Promise<boolean> {
-    console.log('\nğŸ“Š Testing analytics views...');
+    logger.info('\nğŸ“Š Testing analytics views...');
     
     try {
       const sql = this.db.getSQL();
@@ -191,37 +192,37 @@
       await seedDatabase();
       
       // Test merchant analytics view
-      console.log('   ğŸ“ˆ Testing merchant analytics...');
+      logger.info('   ğŸ“ˆ Testing merchant analytics...');
       const merchantAnalytics = await sql`
         SELECT * FROM merchant_analytics LIMIT 5
       `;
-      console.log(`   âœ… Merchant analytics: ${merchantAnalytics.length} records`);
+      logger.info(`   âœ… Merchant analytics: ${merchantAnalytics.length} records`);
 
       // Test platform stats view
-      console.log('   ğŸ“Š Testing platform stats...');
+      logger.info('   ğŸ“Š Testing platform stats...');
       const platformStats = await sql`
         SELECT * FROM daily_platform_stats LIMIT 5
       `;
-      console.log(`   âœ… Platform stats: ${platformStats.length} records`);
+      logger.info(`   âœ… Platform stats: ${platformStats.length} records`);
 
       // Test product performance view
-      console.log('   ğŸ“± Testing product performance...');
+      logger.info('   ğŸ“± Testing product performance...');
       const productPerformance = await sql`
         SELECT * FROM product_performance LIMIT 5
       `;
-      console.log(`   âœ… Product performance: ${productPerformance.length} records`);
+      logger.info(`   âœ… Product performance: ${productPerformance.length} records`);
 
       // Test customer analytics view
-      console.log('   ğŸ‘¥ Testing customer analytics...');
+      logger.info('   ğŸ‘¥ Testing customer analytics...');
       const customerAnalytics = await sql`
         SELECT * FROM customer_analytics LIMIT 5
       `;
-      console.log(`   âœ… Customer analytics: ${customerAnalytics.length} records`);
-
-      console.log('âœ… Analytics views test passed');
+      logger.info(`   âœ… Customer analytics: ${customerAnalytics.length} records`);
+
+      logger.info('âœ… Analytics views test passed');
       return true;
     } catch (error) {
-      console.log('âŒ Analytics views test failed:', error);
+      logger.info('âŒ Analytics views test failed:', error);
       return false;
     }
   }
@@ -230,33 +231,33 @@
    * Test search functionality
    */
   private async testSearch(): Promise<boolean> {
-    console.log('\nğŸ” Testing search functionality...');
+    logger.info('\nğŸ” Testing search functionality...');
     
     try {
       const sql = this.db.getSQL();
       
       // Test product search
-      console.log('   ğŸ“± Testing product search...');
+      logger.info('   ğŸ“± Testing product search...');
       const productSearch = await sql`
         SELECT name_ar, category 
         FROM products 
         WHERE search_vector @@ to_tsquery('arabic', 'Ø¢ÙŠÙÙˆÙ† | Ù…ÙˆØ¨Ø§ÙŠÙ„')
         LIMIT 5
       `;
-      console.log(`   âœ… Product search: ${productSearch.length} results`);
+      logger.info(`   âœ… Product search: ${productSearch.length} results`);
 
       // Test merchant search
-      console.log('   ğŸª Testing merchant search...');
+      logger.info('   ğŸª Testing merchant search...');
       const merchantSearch = await sql`
         SELECT business_name, business_category
         FROM merchants 
         WHERE search_vector @@ to_tsquery('arabic', 'Ù…Ø­Ù„ | Ù…ÙˆØ¨Ø§ÙŠÙ„')
         LIMIT 5
       `;
-      console.log(`   âœ… Merchant search: ${merchantSearch.length} results`);
+      logger.info(`   âœ… Merchant search: ${merchantSearch.length} results`);
 
       // Test fuzzy search with pg_trgm
-      console.log('   ğŸ¯ Testing fuzzy search...');
+      logger.info('   ğŸ¯ Testing fuzzy search...');
       const fuzzySearch = await sql`
         SELECT name_ar, similarity(name_ar, 'Ø§ÙŠÙÙˆÙ†') as sim
         FROM products 
@@ -264,12 +265,12 @@
         ORDER BY sim DESC
         LIMIT 3
       `;
-      console.log(`   âœ… Fuzzy search: ${fuzzySearch.length} results`);
-
-      console.log('âœ… Search functionality test passed');
+      logger.info(`   âœ… Fuzzy search: ${fuzzySearch.length} results`);
+
+      logger.info('âœ… Search functionality test passed');
       return true;
     } catch (error) {
-      console.log('âŒ Search functionality test failed:', error);
+      logger.info('âŒ Search functionality test failed:', error);
       return false;
     }
   }
@@ -278,13 +279,13 @@
    * Test performance
    */
   private async testPerformance(): Promise<boolean> {
-    console.log('\nâš¡ Testing performance...');
+    logger.info('\nâš¡ Testing performance...');
     
     try {
       const sql = this.db.getSQL();
       
       // Test query performance
-      console.log('   â±ï¸ Testing query performance...');
+      logger.info('   â±ï¸ Testing query performance...');
       
       const startTime = Date.now();
       
@@ -305,10 +306,10 @@
       `;
       
       const queryTime = Date.now() - startTime;
-      console.log(`   âœ… Complex query executed in ${queryTime}ms`);
+      logger.info(`   âœ… Complex query executed in ${queryTime}ms`);
       
       // Test index usage
-      console.log('   ğŸ“‡ Testing index usage...');
+      logger.info('   ğŸ“‡ Testing index usage...');
       const indexQuery = await sql`
         SELECT schemaname, tablename, indexname, idx_tup_read, idx_tup_fetch
         FROM pg_stat_user_indexes 
@@ -316,12 +317,12 @@
         ORDER BY idx_tup_read DESC
         LIMIT 5
       `;
-      console.log(`   âœ… Active indexes: ${indexQuery.length}`);
-
-      console.log('âœ… Performance test passed');
+      logger.info(`   âœ… Active indexes: ${indexQuery.length}`);
+
+      logger.info('âœ… Performance test passed');
       return true;
     } catch (error) {
-      console.log('âŒ Performance test failed:', error);
+      logger.info('âŒ Performance test failed:', error);
       return false;
     }
   }
@@ -330,36 +331,36 @@
    * Test specific queries that will be used in the application
    */
   public async testApplicationQueries(): Promise<boolean> {
-    console.log('\nğŸ¯ Testing application-specific queries...');
+    logger.info('\nğŸ¯ Testing application-specific queries...');
     
     try {
       const sql = this.db.getSQL();
       
       // Test merchant KPIs function
-      console.log('   ğŸ“Š Testing merchant KPIs function...');
+      logger.info('   ğŸ“Š Testing merchant KPIs function...');
       const merchants = await sql`SELECT id FROM merchants LIMIT 1`;
       if (merchants.length > 0) {
         const kpis = await sql`SELECT get_merchant_kpis(${merchants[0].id}, 30)`;
-        console.log('   âœ… Merchant KPIs function works');
+        logger.info('   âœ… Merchant KPIs function works');
       }
 
       // Test platform health function
-      console.log('   ğŸ”‹ Testing platform health function...');
+      logger.info('   ğŸ”‹ Testing platform health function...');
       const health = await sql`SELECT get_platform_health()`;
-      console.log('   âœ… Platform health function works');
+      logger.info('   âœ… Platform health function works');
 
       // Test product search with attributes
-      console.log('   ğŸ” Testing JSONB queries...');
+      logger.info('   ğŸ” Testing JSONB queries...');
       const productAttrs = await sql`
         SELECT name_ar, attributes->'brand' as brand
         FROM products 
         WHERE attributes->>'brand' = 'Apple'
         LIMIT 3
       `;
-      console.log(`   âœ… JSONB attribute search: ${productAttrs.length} results`);
+      logger.info(`   âœ… JSONB attribute search: ${productAttrs.length} results`);
 
       // Test order items aggregation
-      console.log('   ğŸ“¦ Testing order items aggregation...');
+      logger.info('   ğŸ“¦ Testing order items aggregation...');
       const orderItems = await sql`
         SELECT 
           (item->>'sku') as sku,
@@ -372,12 +373,12 @@
         ORDER BY total_sold DESC
         LIMIT 5
       `;
-      console.log(`   âœ… Order items aggregation: ${orderItems.length} results`);
-
-      console.log('âœ… Application queries test passed');
+      logger.info(`   âœ… Order items aggregation: ${orderItems.length} results`);
+
+      logger.info('âœ… Application queries test passed');
       return true;
     } catch (error) {
-      console.log('âŒ Application queries test failed:', error);
+      logger.info('âŒ Application queries test failed:', error);
       return false;
     }
   }
@@ -386,21 +387,21 @@
    * Show database statistics
    */
   public async showDatabaseStats(): Promise<void> {
-    console.log('\nğŸ“Š Database Statistics:');
+    logger.info('\nğŸ“Š Database Statistics:');
     
     try {
       const stats = await this.db.getStats();
       
-      console.log(`   ğŸ“‹ Total Tables: ${stats.total_tables}`);
-      console.log(`   ğŸ“ Total Records: ${stats.total_records}`);
-      console.log(`   ğŸ’¾ Database Size: ${stats.database_size}`);
-      console.log('\n   ğŸ“Š Largest Tables:');
+      logger.info(`   ğŸ“‹ Total Tables: ${stats.total_tables}`);
+      logger.info(`   ğŸ“ Total Records: ${stats.total_records}`);
+      logger.info(`   ğŸ’¾ Database Size: ${stats.database_size}`);
+      logger.info('\n   ğŸ“Š Largest Tables:');
       
       stats.largest_tables.forEach((table, index) => {
-        console.log(`   ${index + 1}. ${table.table_name}: ${table.row_count} rows (${table.size})`);
+        logger.info(`   ${index + 1}. ${table.table_name}: ${table.row_count} rows (${table.size})`);
       });
     } catch (error) {
-      console.log('âŒ Failed to get database stats:', error);
+      logger.info('âŒ Failed to get database stats:', error);
     }
   }
 }
@@ -440,10 +441,10 @@
         await tester.showDatabaseStats();
         break;
       default:
-        console.log('ğŸ“– Available commands:');
-        console.log('  test    - Run comprehensive database tests');
-        console.log('  queries - Test application-specific queries');
-        console.log('  stats   - Show database statistics');
+        logger.info('ğŸ“– Available commands:');
+        logger.info('  test    - Run comprehensive database tests');
+        logger.info('  queries - Test application-specific queries');
+        logger.info('  stats   - Show database statistics');
     }
   } catch (error) {
     console.error('âŒ Command failed:', error);
